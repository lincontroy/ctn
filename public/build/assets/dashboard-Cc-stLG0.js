import{r as t,j as e,L,a as c}from"./app-DT_4Y409.js";import{A as C}from"./app-layout-Dm49Z596.js";import{b as x}from"./button-DRPktjTk.js";/* empty css            */import"./index-G9T5zEPV.js";import"./index-Bam0Hizw.js";const U=[{title:"Dashboard",href:"/dashboard"}],E=["all","pending","in_progress","completed"];function z(){const[m,p]=t.useState(0),[h,u]=t.useState(0),[g,b]=t.useState(null),[f,j]=t.useState(0),[y,N]=t.useState(0),[k,w]=t.useState(0),[T,v]=t.useState([]),[n,S]=t.useState(""),[d,_]=t.useState("all"),[A,D]=t.useState(!0);t.useEffect(()=>{const s=async()=>{try{const a=(await c.get("/dashboard-summary")).data;console.log(a),S(a.role),a.role==="admin"&&(p(a.user_count),j(a.all_tasks)),u(a.assigned_tasks),b(a.user_id),N(a.pending_tasks),w(a.completed_tasks)}catch(l){console.error("Dashboard data error",l)}},r=async()=>{try{const l=await c.get("/api/tasks");v(l.data)}catch(l){console.error("Tasks fetch error",l)}finally{D(!1)}};s(),r()},[]);const o=T.filter(s=>s.user_id===g),i=d==="all"?o:o.filter(s=>s.status===d);return e.jsxs(C,{breadcrumbs:U,children:[e.jsx(L,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[n==="admin"&&e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-blue-400 to-blue-600 text-white p-6 shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Users"}),e.jsx("p",{className:"mt-2 text-3xl font-bold",children:m.toLocaleString()}),e.jsx("span",{className:"block mt-1 text-sm text-blue-100",children:"All users"})]}),n==="admin"&&e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-green-400 to-green-600 text-white p-6 shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Tasks"}),e.jsx("p",{className:"mt-2 text-3xl font-bold",children:f.toLocaleString()}),e.jsx("span",{className:"block mt-1 text-sm text-green-100",children:"All tasks"})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-teal-400 to-teal-600 text-white p-6 shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Assigned Tasks"}),e.jsx("p",{className:"mt-2 text-3xl font-bold",children:h.toLocaleString()}),e.jsx("span",{className:"block mt-1 text-sm text-teal-100",children:"Assigned tasks"})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-purple-500 to-purple-700 text-white p-6 shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Pending Tasks"}),e.jsx("p",{className:"mt-2 text-3xl font-bold",children:y.toLocaleString()}),e.jsx("span",{className:"block mt-1 text-sm text-purple-100",children:"Pending tasks"})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-r from-indigo-500 to-indigo-700 text-white p-6 shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Completed Tasks"}),e.jsx("p",{className:"mt-2 text-3xl font-bold",children:k.toLocaleString()}),e.jsx("span",{className:"block mt-1 text-sm text-indigo-100",children:"Completed tasks"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),E.map(s=>e.jsx("button",{className:x("px-3 py-1 text-sm rounded-full border",d===s?"bg-blue-600 text-white border-blue-600":"text-gray-600 border-gray-300 hover:bg-gray-100"),onClick:()=>_(s),children:s.replace("_"," ").toUpperCase()},s))]}),A?e.jsx("div",{className:"mt-10 flex justify-center items-center",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto rounded-xl shadow border border-gray-200 mt-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deadline"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned To"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[i.map(s=>{var r;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.title}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:s.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:x("px-2 py-1 rounded-full text-xs font-semibold",{pending:"bg-yellow-100 text-yellow-700",in_progress:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700"}[s.status]),children:s.status.replace("_"," ").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:s.deadline?new Date(s.deadline).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:((r=s.user)==null?void 0:r.name)||"Unassigned"})]},s.id)}),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No tasks to display."})})]})]})})]})]})}export{z as default};
