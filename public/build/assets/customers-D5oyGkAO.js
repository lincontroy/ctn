import{r as t,j as e}from"./app-DT_4Y409.js";import{A,X as S}from"./app-layout-Dm49Z596.js";import{E as P,P as D,T}from"./trash-2-BXkzaiLC.js";/* empty css            */import"./button-DRPktjTk.js";import"./index-G9T5zEPV.js";import"./index-Bam0Hizw.js";const F=[{title:"Dashboard",href:"/dashboard"}];function J(){const[h,g]=t.useState([]),[w,x]=t.useState(!1),[l,p]=t.useState(!1),[o,m]=t.useState(null),[a,i]=t.useState({name:"",email:"",phone:"",password:"",role:"user"}),[b,f]=t.useState(null),[M,u]=t.useState(!1),d=(s,r)=>{f({type:s,message:r}),setTimeout(()=>f(null),3e3)},y=async()=>{u(!0);try{const s=await fetch("/api/users");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();g(r)}catch(s){console.error("Error fetching users:",s),d("error","Failed to fetch users")}finally{u(!1)}};t.useEffect(()=>{y()},[]);const N=()=>{i({name:"",email:"",phone:"",password:"",role:"user"}),m(null),p(!1),x(!0)},k=s=>{i({name:s.name,email:s.email,phone:s.phone,password:"",role:s.role}),m(s),p(!1),x(!0)},v=s=>{i({name:s.name,email:s.email,phone:s.phone,password:"",role:s.role}),m(s),p(!0),x(!0)},j=()=>{x(!1),m(null),i({name:"",email:"",phone:"",password:"",role:"user"})},c=s=>{i({...a,[s.target.name]:s.target.value})},U=async s=>{s.preventDefault(),u(!0);try{if(o){const r={...a};r.password||delete r.password;const n=await fetch(`/api/users/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!n.ok){const C=await n.json();throw new Error(C.message||"Failed to update user")}d("success","User updated successfully!")}else{const r=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to add user")}d("success","User added successfully!")}j(),y()}catch(r){d("error",r.message||"Failed to save user.")}finally{u(!1)}},E=async s=>{if(confirm("Are you sure you want to delete this user?"))try{const r=h.filter(n=>n.id!==s);g(r),d("success","User deleted successfully!")}catch(r){d("error",r.message||"Failed to delete user.")}};return e.jsx(A,{breadcrumbs:F,children:e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[b&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${b.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:b.message}),e.jsxs("div",{className:"flex flex-col gap-6 p-4 overflow-x-auto",children:[e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsx("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:e.jsx("li",{className:"inline-flex items-center",children:e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Users"})})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white",children:"Users"}),e.jsx("button",{onClick:N,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"+ Add User"})]}),e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-md dark:border-gray-700 dark:bg-gray-900",children:e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"min-w-full table-auto text-sm border border-gray-300 dark:border-gray-600",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border text-left",children:"Name"}),e.jsx("th",{className:"px-4 py-2 border text-left",children:"Email"}),e.jsx("th",{className:"px-4 py-2 border text-left",children:"Phone"}),e.jsx("th",{className:"px-4 py-2 border text-left",children:"Role"}),e.jsx("th",{className:"px-4 py-2 border text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-4 py-2 border",children:s.name}),e.jsx("td",{className:"px-4 py-2 border",children:s.email}),e.jsx("td",{className:"px-4 py-2 border",children:s.phone}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:s.role})}),e.jsx("td",{className:"px-4 py-2 border",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>v(s),className:"text-blue-500 hover:text-blue-700 transition-colors",title:"View",children:e.jsx(P,{size:18})}),e.jsx("button",{onClick:()=>k(s),className:"text-green-500 hover:text-green-700 transition-colors",title:"Edit",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>E(s.id),className:"text-red-500 hover:text-red-700 transition-colors",title:"Delete",children:e.jsx(T,{size:18})})]})})]},s.id)),h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No users found."})})]})]})})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md relative shadow-xl",children:[e.jsx("button",{onClick:j,className:"absolute top-2 right-2 text-gray-600 hover:text-red-500 transition-colors",children:e.jsx(S,{size:20})}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:l?"User Details":o?"Edit User":"Add User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{name:"name",placeholder:"Full Name",value:a.name,onChange:c,disabled:l,className:"w-full px-4 py-2 border rounded-md dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),e.jsx("input",{name:"email",type:"email",placeholder:"Email Address",value:a.email,onChange:c,disabled:l,className:"w-full px-4 py-2 border rounded-md dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Number"}),e.jsx("input",{name:"phone",placeholder:"Phone Number",value:a.phone,onChange:c,disabled:l,className:"w-full px-4 py-2 border rounded-md dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),!l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx("input",{name:"password",type:"password",placeholder:o?"New Password (leave empty to keep current)":"Password",value:a.password,onChange:c,className:"w-full px-4 py-2 border rounded-md dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsxs("select",{name:"role",value:a.role,onChange:c,disabled:l,className:"w-full px-4 py-2 border rounded-md dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),!l&&e.jsx("button",{type:"button",onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md w-full transition-colors",children:o?"Update":"Add"})]})]})})]})})}export{J as default};
